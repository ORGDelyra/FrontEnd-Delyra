<div class="mapa-usuarios-wrapper">
  <div class="controls">
    <input type="text" placeholder="Buscar sucursal por nombre..." [(ngModel)]="query" (input)="onQueryChange()" />
    <button (click)="showAll()">Mostrar todas</button>
    <button (click)="fitToQuilichao()">Centrar en Quilichao</button>
    <button (click)="toggleBounds()">{{ boundsEnabled ? 'Desbloquear mapa' : 'Bloquear mapa' }}</button>
  </div>

  <div class="layout">
    <div class="list">
      <div *ngIf="loading" style="padding: 20px; text-align: center; color: #7dff7a;">Cargando sucursales...</div>
      <div *ngIf="!loading && filteredBranches.length === 0" style="padding: 20px; text-align: center; color: #9aa2c7;">No hay resultados</div>
      <ul>
        <li *ngFor="let b of filteredBranches" (click)="selectBranch(b)" title="Click para ver en el mapa">
          <strong>ğŸ“ {{ b.nombre_sucursal }}</strong>
          <div class="dir">{{ b.direccion || 'Sin direcciÃ³n registrada' }}</div>
        </li>
      </ul>
      <div class="mensaje" *ngIf="mensaje">{{ mensaje }}</div>
    </div>

    <div id="mapa-usuarios-container" class="map-container"></div>
  </div>
</div>
