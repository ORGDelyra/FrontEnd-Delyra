<div class="selector-ubicacion-container">
  <!-- Barra de bÃºsqueda -->
  <div class="busqueda-section">
    <div class="input-group">
      <input
        type="text"
        [(ngModel)]="direccion"
        (ngModelChange)="buscarDireccion($event)"
        placeholder="ğŸ” Busca tu direcciÃ³n (ej: Calle 50 #10-20, BogotÃ¡)"
        class="input-busqueda"
      />
      <button
        (click)="usarMiUbicacion()"
        [disabled]="buscando"
        type="button"
        class="btn-ubicacion">
        ğŸ“ Mi UbicaciÃ³n
      </button>
    </div>

    <!-- Resultados de bÃºsqueda -->
    <div *ngIf="mostrarResultados && resultadosBusqueda.length > 0" class="resultados-busqueda">
      <div *ngFor="let resultado of resultadosBusqueda"
           (click)="seleccionarResultado(resultado)"
           class="resultado-item">
        <span class="resultado-icon">ğŸ“</span>
        <span class="resultado-texto">{{ resultado.display_name }}</span>
      </div>
    </div>

    <div *ngIf="buscando" class="mensaje-carga">
      â³ {{ mensaje }}
    </div>

    <div *ngIf="mensaje && !buscando"
         [class.mensaje-error]="mensaje.includes('Error') || mensaje.includes('No se pudo')"
         [class.mensaje-exito]="mensaje.includes('âœ…')"
         class="mensaje">
      {{ mensaje }}
    </div>
  </div>

  <!-- Mapa interactivo -->
  <div id="mapa-selector" class="mapa-container"></div>

  <!-- InformaciÃ³n de ubicaciÃ³n seleccionada -->
  <div *ngIf="ubicacionObtenida" class="ubicacion-info">
    <h3>ğŸ“ UbicaciÃ³n Seleccionada</h3>

    <div class="info-row">
      <label>DirecciÃ³n:</label>
      <input
        type="text"
        [(ngModel)]="direccion"
        placeholder="Tu direcciÃ³n"
        class="input-texto"
      />
    </div>

    <div class="info-row">
      <label>Latitud:</label>
      <input
        type="text"
        [(ngModel)]="latitud"
        readonly
        class="input-texto input-readonly"
      />
    </div>

    <div class="info-row">
      <label>Longitud:</label>
      <input
        type="text"
        [(ngModel)]="longitud"
        readonly
        class="input-texto input-readonly"
      />
    </div>

    <div class="info-ayuda">
      <small>ğŸ’¡ Puedes arrastar el marcador en el mapa o buscar una nueva direcciÃ³n</small>
    </div>
  </div>

  <!-- Botones de acciÃ³n -->
  <div class="botones-accion">
    <button
      (click)="confirmarUbicacion()"
      [disabled]="!ubicacionObtenida"
      class="btn-confirmar">
      âœ… Confirmar UbicaciÃ³n
    </button>
    <button
      (click)="limpiar()"
      class="btn-limpiar">
      ğŸ”„ Limpiar
    </button>
  </div>
</div>
