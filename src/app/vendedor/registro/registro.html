<div class="min-h-screen bg-[#04060f] text-[#f3f5ff] py-10 px-4">
  <div class="max-w-3xl mx-auto">
    <!-- T√≠tulo principal -->
    <div class="text-center mb-10">
      <h1 class="text-5xl font-extrabold bg-gradient-to-r from-[#0f1a2e] via-[#b1122d] to-[#f8bfa8] bg-clip-text text-transparent mb-3 font-[Poppins]">Delyra</h1>
      <p class="text-[#d4a5b4] text-lg">Registro de Vendedor</p>
      <p class="text-[#8b4a5a] text-sm mt-2">Comparte tus productos con toda la red Delyra</p>
    </div>

    <!-- Indicador de pasos -->
    <div class="mb-10 flex flex-col sm:flex-row items-center justify-center gap-6">
      <div class="flex items-center gap-3">
        <div
          class="w-12 h-12 rounded-full flex items-center justify-center font-bold transition"
          [ngClass]="pasoActual >= 1 ? 'bg-[#7dff7a] text-[#05060c]' : 'bg-[#0f162d] text-[#9aa2c7]'"
        >
          1
        </div>
        <span class="text-sm font-medium text-[#9aa2c7]">Datos personales</span>
      </div>
      <div class="hidden sm:block h-px w-20 bg-[#1f2847]"></div>
      <div class="flex items-center gap-3">
        <div
          class="w-12 h-12 rounded-full flex items-center justify-center font-bold transition"
          [ngClass]="pasoActual >= 2 ? 'bg-[#7dff7a] text-[#05060c]' : 'bg-[#0f162d] text-[#9aa2c7]'"
        >
          2
        </div>
        <span class="text-sm font-medium text-[#9aa2c7]">Datos de la sucursal</span>
      </div>
    </div>

    <!-- Mensaje de error -->
    <div *ngIf="mensajeError" class="mb-6 p-4 bg-[#2f1518] border border-red-500 text-[#fecaca] rounded">
      {{ mensajeError }}
    </div>

    <!-- Paso 1: Datos del Usuario -->
    <div *ngIf="pasoActual === 1" class="bg-[#0b1020] shadow-2xl rounded-[30px] p-10 border border-[#1f2847]">
      <h2 class="text-2xl font-semibold mb-6">Informaci√≥n personal</h2>

      <form [formGroup]="formUsuario" (ngSubmit)="siguientePaso()">
        <!-- Nombres -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
          <div>
            <label class="block text-sm uppercase tracking-wide text-[#9aa2c7] mb-2">
              Primer Nombre <span class="text-red-500">*</span>
            </label>
            <input
              formControlName="primer_nombre"
              type="text"
              class="w-full px-4 py-3 rounded-2xl bg-[#0f162d] border border-[#1e2644] focus:ring-2 focus:ring-[#7dff7a] focus:border-transparent"
              [class.border-red-500]="fUsuario['primer_nombre'].invalid && fUsuario['primer_nombre'].touched"
            >
            <span *ngIf="fUsuario['primer_nombre'].invalid && fUsuario['primer_nombre'].touched"
                  class="text-red-500 text-sm mt-1 block">Este campo es requerido</span>
          </div>

          <div>
            <label class="block text-sm uppercase tracking-wide text-[#9aa2c7] mb-2">Segundo Nombre</label>
            <input
              formControlName="segundo_nombre"
              type="text"
              class="w-full px-4 py-3 rounded-2xl bg-[#0f162d] border border-[#1e2644] focus:ring-2 focus:ring-[#7dff7a] focus:border-transparent"
            >
          </div>
        </div>

        <!-- Apellidos -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
          <div>
            <label class="block text-sm uppercase tracking-wide text-[#9aa2c7] mb-2">
              Primer Apellido <span class="text-red-500">*</span>
            </label>
            <input
              formControlName="primer_apellido"
              type="text"
              class="w-full px-4 py-3 rounded-2xl bg-[#0f162d] border border-[#1e2644] focus:ring-2 focus:ring-[#7dff7a] focus:border-transparent"
              [class.border-red-500]="fUsuario['primer_apellido'].invalid && fUsuario['primer_apellido'].touched"
            >
            <span *ngIf="fUsuario['primer_apellido'].invalid && fUsuario['primer_apellido'].touched"
                  class="text-red-500 text-sm mt-1 block">Este campo es requerido</span>
          </div>

          <div>
            <label class="block text-sm uppercase tracking-wide text-[#9aa2c7] mb-2">Segundo Apellido</label>
            <input
              formControlName="segundo_apellido"
              type="text"
              class="w-full px-4 py-3 rounded-2xl bg-[#0f162d] border border-[#1e2644] focus:ring-2 focus:ring-[#7dff7a] focus:border-transparent"
            >
          </div>
        </div>

        <!-- Tel√©fono y Correo -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
          <div>
            <label class="block text-sm uppercase tracking-wide text-[#9aa2c7] mb-2">
              Tel√©fono <span class="text-red-500">*</span>
            </label>
            <input
              formControlName="telefono"
              type="text"
              placeholder="10 d√≠gitos"
              class="w-full px-4 py-3 rounded-2xl bg-[#0f162d] border border-[#1e2644] focus:ring-2 focus:ring-[#7dff7a] focus:border-transparent"
              [class.border-red-500]="fUsuario['telefono'].invalid && fUsuario['telefono'].touched"
            >
            <span *ngIf="fUsuario['telefono'].invalid && fUsuario['telefono'].touched"
                  class="text-red-500 text-sm mt-1 block">Tel√©fono inv√°lido (10 d√≠gitos)</span>
          </div>

          <div>
            <label class="block text-sm uppercase tracking-wide text-[#9aa2c7] mb-2">
              Correo Electr√≥nico <span class="text-red-500">*</span>
            </label>
            <input
              formControlName="correo"
              type="email"
              class="w-full px-4 py-3 rounded-2xl bg-[#0f162d] border border-[#1e2644] focus:ring-2 focus:ring-[#7dff7a] focus:border-transparent"
              [class.border-red-500]="fUsuario['correo'].invalid && fUsuario['correo'].touched"
            >
            <span *ngIf="fUsuario['correo'].invalid && fUsuario['correo'].touched"
                  class="text-red-500 text-sm mt-1 block">Correo inv√°lido</span>
          </div>
        </div>

        <!-- Contrase√±a y Cuenta Bancaria -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
          <div>
            <label class="block text-sm uppercase tracking-wide text-[#9aa2c7] mb-2">
              Contrase√±a <span class="text-red-500">*</span>
            </label>
            <div class="relative">
              <input
                formControlName="password"
                [type]="mostrarPassword ? 'text' : 'password'"
                class="w-full px-4 py-3 pr-12 rounded-2xl bg-[#0f162d] border border-[#1e2644] focus:ring-2 focus:ring-[#7dff7a] focus:border-transparent"
                [class.border-red-500]="fUsuario['password'].invalid && fUsuario['password'].touched"
              >
              <button
                type="button"
                (click)="togglePassword()"
                class="absolute right-3 top-1/2 -translate-y-1/2 text-[#9aa2c7] hover:text-[#7dff7a] transition"
                title="{{ mostrarPassword ? 'Ocultar' : 'Mostrar' }} contrase√±a">
                <span class="text-xl">{{ mostrarPassword ? 'üëÅÔ∏è' : 'üîí' }}</span>
              </button>
            </div>
            <span *ngIf="fUsuario['password'].invalid && fUsuario['password'].touched"
                  class="text-red-500 text-sm mt-1 block">M√≠nimo 6 caracteres</span>
          </div>

          <div>
            <label class="block text-sm uppercase tracking-wide text-[#9aa2c7] mb-2">
              Cuenta Bancaria <span class="text-red-500">*</span>
            </label>
            <input
              formControlName="cuenta_bancaria"
              type="text"
              class="w-full px-4 py-3 rounded-2xl bg-[#0f162d] border border-[#1e2644] focus:ring-2 focus:ring-[#7dff7a] focus:border-transparent"
              [class.border-red-500]="fUsuario['cuenta_bancaria'].invalid && fUsuario['cuenta_bancaria'].touched"
            >
            <span *ngIf="fUsuario['cuenta_bancaria'].invalid && fUsuario['cuenta_bancaria'].touched"
                  class="text-red-500 text-sm mt-1 block">Este campo es requerido</span>
          </div>
        </div>

        <!-- Bot√≥n siguiente -->
        <button
          type="submit"
          [disabled]="cargando"
          class="w-full font-bold py-4 px-6 rounded-2xl transition duration-200 disabled:bg-gray-500 disabled:cursor-not-allowed mb-2 bg-gradient-to-r from-[#0f1a2e] via-[#b1122d] to-[#f8bfa8] text-white shadow-lg hover:opacity-90">
          <span *ngIf="!cargando">Siguiente: Datos de la sucursal</span>
          <span *ngIf="cargando">Procesando...</span>
        </button>
      </form>
    </div>

    <!-- Paso 2: Datos de la Sucursal -->
    <div *ngIf="pasoActual === 2" class="bg-[#0b1020] shadow-2xl rounded-[30px] p-10 border border-[#1f2847]">
      <h2 class="text-2xl font-semibold mb-6">Informaci√≥n de la sucursal</h2>

      <form [formGroup]="formSucursal" (ngSubmit)="completarRegistro()">
        <!-- Nombre y NIT -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
          <div>
            <label class="block text-sm uppercase tracking-wide text-[#9aa2c7] mb-2">
              Nombre de la Sucursal <span class="text-red-500">*</span>
            </label>
            <input
              formControlName="nombre_sucursal"
              type="text"
              class="w-full px-4 py-3 rounded-2xl bg-[#0f162d] border border-[#1e2644] focus:ring-2 focus:ring-[#7dff7a] focus:border-transparent"
              [class.border-red-500]="fSucursal['nombre_sucursal'].invalid && fSucursal['nombre_sucursal'].touched"
            >
            <span *ngIf="fSucursal['nombre_sucursal'].invalid && fSucursal['nombre_sucursal'].touched"
                  class="text-red-500 text-sm mt-1 block">Este campo es requerido</span>
          </div>

          <div>
            <label class="block text-sm uppercase tracking-wide text-[#9aa2c7] mb-2">
              NIT <span class="text-red-500">*</span>
            </label>
            <input
              formControlName="nit"
              type="text"
              class="w-full px-4 py-3 rounded-2xl bg-[#0f162d] border border-[#1e2644] focus:ring-2 focus:ring-[#7dff7a] focus:border-transparent"
              [class.border-red-500]="fSucursal['nit'].invalid && fSucursal['nit'].touched"
            >
            <span *ngIf="fSucursal['nit'].invalid && fSucursal['nit'].touched"
                  class="text-red-500 text-sm mt-1 block">Este campo es requerido</span>
          </div>
        </div>

        <!-- Imagen NIT -->
        <div class="mb-6">
          <label class="block text-sm uppercase tracking-wide text-[#9aa2c7] mb-2">
            Imagen del NIT (Opcional)
          </label>
          <div class="flex flex-col items-center gap-4">
            <div *ngIf="imagenNIT" class="w-full h-32 bg-[#0f162d] border-2 border-dashed border-[#7dff7a] rounded-lg flex items-center justify-center">
              <img [src]="imagenNIT" alt="Vista previa NIT" class="max-h-full max-w-full object-contain">
            </div>
            <label class="bg-[#7dff7a] hover:bg-[#6ae069] text-[#04060f] px-6 py-2 rounded-lg font-semibold cursor-pointer transition">
              <span *ngIf="!cargandoNIT">{{ imagenNIT ? 'Cambiar imagen del NIT' : 'Seleccionar imagen del NIT' }}</span>
              <span *ngIf="cargandoNIT">Subiendo...</span>
              <input type="file" accept="image/*" (change)="onImagenNITSelect($event)" class="hidden" [disabled]="cargandoNIT">
            </label>
          </div>
        </div>

        <!-- Direcci√≥n -->
        <div class="mb-6">
          <label class="block text-sm uppercase tracking-wide text-[#9aa2c7] mb-2">Direcci√≥n</label>
          <input
            formControlName="direccion"
            type="text"
            class="w-full px-4 py-3 rounded-2xl bg-[#0f162d] border border-[#1e2644] focus:ring-2 focus:ring-[#7dff7a] focus:border-transparent"
          >
        </div>

        <!-- Informaci√≥n sobre ubicaci√≥n -->
        <div class="mb-4 p-4 bg-[#0f162d] border border-[#1f2847] rounded-lg">
          <div class="flex items-start gap-3">
            <span class="text-2xl">üìç</span>
            <div class="flex-1">
              <h4 class="text-sm font-semibold text-[#7dff7a] mb-2">¬øC√≥mo obtener las coordenadas de tu negocio?</h4>
              <ol class="text-xs text-[#9aa2c7] space-y-1 list-decimal list-inside">
                <li>Abre Google Maps en tu navegador</li>
                <li>Busca la ubicaci√≥n exacta de tu negocio en Santander de Quilichao</li>
                <li>Haz clic derecho sobre el punto exacto</li>
                <li>Selecciona las coordenadas que aparecen (primer n√∫mero es latitud, segundo es longitud)</li>
                <li>Copia y pega cada valor en los campos correspondientes</li>
              </ol>
              <p class="text-xs text-[#7dff7a] mt-2">
                ‚ö†Ô∏è Solo se aceptan coordenadas dentro de Santander de Quilichao, Cauca
              </p>
            </div>
          </div>
        </div>

        <!-- Latitud y Longitud -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
          <div>
            <label class="block text-sm uppercase tracking-wide text-[#9aa2c7] mb-2">
              Latitud
              <span class="text-xs lowercase normal-case text-[#7dff7a]">(Santander de Quilichao)</span>
            </label>
            <input
              formControlName="latitud"
              type="text"
              placeholder="Ej: 3.0133"
              class="w-full px-4 py-3 rounded-2xl bg-[#0f162d] border border-[#1e2644] focus:ring-2 focus:ring-[#7dff7a] focus:border-transparent"
              [class.border-red-500]="fSucursal['latitud'].invalid && fSucursal['latitud'].touched"
            >
            <span *ngIf="fSucursal['latitud'].errors?.['latitudInvalida'] && fSucursal['latitud'].touched"
                  class="text-red-500 text-xs mt-1 block">{{ fSucursal['latitud'].errors?.['latitudInvalida'] }}</span>
            <span *ngIf="fSucursal['latitud'].errors?.['fueraDeQuilichao'] && fSucursal['latitud'].touched"
                  class="text-red-500 text-xs mt-1 block">{{ fSucursal['latitud'].errors?.['fueraDeQuilichao'] }}</span>
            <span *ngIf="!fSucursal['latitud'].errors && !fSucursal['latitud'].touched"
                  class="text-[#9aa2c7] text-xs mt-1 block">Rango: 2.95 a 3.08</span>
          </div>

          <div>
            <label class="block text-sm uppercase tracking-wide text-[#9aa2c7] mb-2">
              Longitud
              <span class="text-xs lowercase normal-case text-[#7dff7a]">(Santander de Quilichao)</span>
            </label>
            <input
              formControlName="longitud"
              type="text"
              placeholder="Ej: -76.4842"
              class="w-full px-4 py-3 rounded-2xl bg-[#0f162d] border border-[#1e2644] focus:ring-2 focus:ring-[#7dff7a] focus:border-transparent"
              [class.border-red-500]="fSucursal['longitud'].invalid && fSucursal['longitud'].touched"
            >
            <span *ngIf="fSucursal['longitud'].errors?.['longitudInvalida'] && fSucursal['longitud'].touched"
                  class="text-red-500 text-xs mt-1 block">{{ fSucursal['longitud'].errors?.['longitudInvalida'] }}</span>
            <span *ngIf="fSucursal['longitud'].errors?.['fueraDeQuilichao'] && fSucursal['longitud'].touched"
                  class="text-red-500 text-xs mt-1 block">{{ fSucursal['longitud'].errors?.['fueraDeQuilichao'] }}</span>
            <span *ngIf="!fSucursal['longitud'].errors && !fSucursal['longitud'].touched"
                  class="text-[#9aa2c7] text-xs mt-1 block">Rango: -76.58 a -76.38</span>
          </div>
        </div>

        <!-- Botones -->
        <div class="flex flex-col md:flex-row gap-4">
          <button
            type="button"
            (click)="pasoAnterior()"
            [disabled]="cargando"
            class="flex-1 border border-[#1f2847] text-[#9aa2c7] font-semibold py-3 px-6 rounded-2xl transition duration-200 hover:text-[#7dff7a]">
            Volver
          </button>

          <button
            type="submit"
            [disabled]="cargando"
            class="flex-1 font-bold py-4 px-6 rounded-2xl transition duration-200 disabled:bg-gray-500 disabled:cursor-not-allowed bg-gradient-to-r from-[#0f1a2e] via-[#b1122d] to-[#f8bfa8] text-white shadow-lg hover:opacity-90">
            <span *ngIf="!cargando">Completar registro</span>
            <span *ngIf="cargando">Guardando...</span>
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
